<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyber-Scan Pro | Record Finder</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>

<style>
@import url('https://fonts.cdnfonts.com/css/solaimanlipi');

:root {
    --neon:#00f3ff;
    --bg:#020205;
}

body {
    background:var(--bg);
    color:#e0e0e0;
    font-family:'SolaimanLipi', sans-serif;
    margin:0;
    padding:20px;
    display:flex;
    justify-content:center;
}

.container {
    width:100%;
    max-width:850px;
}

.search-box {
    position:sticky;
    top:10px;
    background:rgba(2,2,5,.95);
    padding:20px;
    border:1px solid var(--neon);
    border-radius:12px;
    box-shadow:0 0 20px rgba(0,243,255,.25);
    z-index:10;
}

input {
    width:100%;
    background:transparent;
    border:none;
    border-bottom:2px solid var(--neon);
    color:white;
    font-size:1.3rem;
    padding:10px 0;
    outline:none;
    font-family:'SolaimanLipi', sans-serif;
}

input::placeholder {
    color:#888;
}

.status {
    font-size:.7rem;
    color:var(--neon);
    text-align:center;
    margin-top:10px;
    letter-spacing:2px;
    text-transform:uppercase;
}

.result-card {
    background:rgba(255,255,255,.05);
    margin-top:20px;
    padding:25px;
    border-radius:12px;
    border-left:5px solid var(--neon);
    line-height:1.9;
    animation:fadeIn .3s ease;
}

.data-content {
    font-size:1.15rem;
    white-space:pre-wrap;
}

.highlight {
    background:rgba(0,243,255,.45);
    padding:0 3px;
    border-radius:3px;
    font-weight:bold;
}

.voter {
    color:var(--neon);
    font-weight:bold;
    display:block;
    margin-bottom:10px;
}

@keyframes fadeIn {
    from { opacity:0; transform:translateY(10px); }
    to { opacity:1; transform:translateY(0); }
}
</style>
</head>

<body>

<div class="container">

    <div class="search-box">
        <input id="searchInput"
               placeholder="ржЬржирзНржо рждрж╛рж░рж┐ржЦ рж▓рж┐ржЦрзБржи (ржпрзЗржоржи: рзирзл/рзжрзл/рзирзжрзжрзл)"
               autocomplete="off">
        <div id="status" class="status">Loading PDF Engine...</div>
    </div>

    <div id="results"></div>

</div>

<script>
const pdfjsLib = window['pdfjs-dist/build/pdf'];
pdfjsLib.GlobalWorkerOptions.workerSrc =
'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

let fullPdfText = "";

/* ===== DIGIT CONVERTER ===== */
const engToBn = {
    "0":"рзж","1":"рзз","2":"рзи","3":"рзй","4":"рзк",
    "5":"рзл","6":"рзм","7":"рзн","8":"рзо","9":"рзп"
};

function convertToBanglaDigits(value) {
    return value.replace(/[0-9]/g, d => engToBn[d]);
}

/* ===== AUTO BANGLA FIXER (NEW) ===== */
const fixMap = {
    "├Пржорж╛ржГ": "ржорзЛржГ",
    "├Пржкрж╢рж╛": "ржкрзЗрж╢рж╛",
    " ├ПржмржЧржо": "ржмрзЗржЧржо",
    "ржЫрж╛─Ф/ржЫрж╛─Ф": "ржЫрж╛рждрзНрж░/ржЫрж╛рждрзНрж░рзА",
    "├Пржнрж╛ржЯрж╛рж░ ржиржВ": "ржнрзЛржЯрж╛рж░ ржиржВ",
    "ржЖ├Чрж╛рж░": "ржЖржХрзНрждрж╛рж░",
    "├Пржнрж╛рж▓рж╛": " ",
    "ржорж┐├╜рж▓": "ржоржЮрзНржЬрж┐рж▓",
    "ржкрж╛ржЯ├О": "ржкрж╛рж░рзНржЯ",
    "рж┐рж╢├ЩржХ": "рж╢рж┐ржХрзНрж╖ржХ",
    "ржЬ─е рждрж╛рж┐рж░ржЦ": "ржЬржирзНржо рждрж╛рж░рж┐ржЦ",
    "рж┐ржкрждрж╛": "ржкрж┐рждрж╛",
    "рж┐ржаржХрж╛ржирж╛": "ржарж┐ржХрж╛ржирж╛",
    "ржЙ─Урж░": "ржЙрждрзНрждрж░",
    "ржорж╛─Щрж╛ржЬ": "ржорж╛ржжрзНрж░рж╛ржЬ",
    "ржЪрж░ ржл├Лрж╛рж╢ржи": "ржЪрж░ржлрзНржпрж╛рж╢ржи, ржнрзЛрж▓рж╛",
    "┼Шрж┐ржоржХ": "рж╢рзНрж░ржорж┐ржХ",
    "ржм├Лржмрж╕рж╛": "ржмрзНржпржмрж╕рж╛",
    "├Пржмрж╕рж░ржХрж╛рж░рзА ржЪрж╛╞грж░рзА": "ржмрзЗрж╕рж░ржХрж╛рж░рзА ржЪрж╛ржХрзБрж░рзА",
    " рж┐ржмрж┐ржм": "ржмрж┐ржмрж┐",
    "ржмрж╛рж┐рзЬ": "ржмрж╛рзЬрж┐",
    "├П": "рж┐",
    "─е": "ржо",
    "├Л": "рзНржп",
    "┼Ш": "рж╢",
    "─У": "ржд",
    "─Щ": "ржж"
    "╞Б": "рж░рзБ",
    "s": "ржирзБ",
    "┼З": "ржорзНржо",
    "─║рзБ": "ржмрзНржжрзБ",
    "рж╛ржХ":"ржХрж╛",
    "рж╛ржЦ":"ржЦрж╛",
    "рж╛ржЧ":"ржЧрж╛",
    "рж╛ржШ":"ржШрж╛",
    "рж╛ржЩ":"ржЩрж╛","рж╛ржЪ":"ржЪрж╛",
    "рж╛ржЫ":"ржЫрж╛",
    "рж╛ржЬ":"ржЬрж╛",
    "рж╛ржЭ":"ржЭрж╛",
    "рж╛ржЮ":"ржЮрж╛",
    "рж╛ржЯ":"ржЯрж╛",
    "рж╛ржа":"ржарж╛",
    "рж╛ржб":"ржбрж╛",
    "рж╛ржв":"ржврж╛",
    "рж╛ржг":"ржгрж╛",
    "рж╛ржд":"рждрж╛",
    "рж╛рже":"ржерж╛",
    "рж╛ржж":"ржжрж╛",
    "рж╛ржз":"ржзрж╛",
    "рж╛ржи":"ржирж╛",
    "рж╛ржк":"ржкрж╛",
    "рж╛ржл":"ржлрж╛",
    "рж╛ржм":"ржмрж╛",
    "рж╛ржн":"ржнрж╛",
    "рж╛ржо":"ржорж╛",
    "рж╛ржп":"ржпрж╛",
    "рж╛рж░":"рж░рж╛",
    "рж╛рж▓":"рж▓рж╛",
    "рж╛рж╢":"рж╢рж╛",
    "рж╛рж╖":"рж╖рж╛",
    "рж╛рж╕":"рж╕рж╛",
    "рж╛рж╣":"рж╣рж╛",
    "рж╛рзЬ":"рзЬрж╛",
    "рж╛рзЭ":"рзЭрж╛",
    "рж╛рзЯ":"рзЯрж╛"
    
    "рж┐ржХ":"ржХрж┐",
    "рж┐ржЦ":"ржЦрж┐",
    "рж┐ржЧ":"ржЧрж┐",
    "рж┐ржШ":"ржШрж┐",
    "рж┐ржЩ":"ржЩрж┐",
    "рж┐ржЪ":"ржЪрж┐",
    "рж┐ржЫ":"ржЫрж┐",
    "рж┐ржЬ":"ржЬрж┐",
    "рж┐ржЭ":"ржЭрж┐",
    "рж┐ржЮ":"ржЮрж┐",
    "рж┐ржЯ":"ржЯрж┐",
    "рж┐ржа":"ржарж┐",
    "рж┐ржб":"ржбрж┐",
    "рж┐ржв":"ржврж┐",
    "рж┐ржг":"ржгрж┐",
    "рж┐ржд":"рждрж┐",
    "рж┐рже":"ржерж┐",
    "рж┐ржж":"ржжрж┐",
    "рж┐ржз":"ржзрж┐",
    "рж┐ржи":"ржирж┐",
    "рж┐ржк":"ржкрж┐",
    "рж┐ржл":"ржлрж┐",
    "рж┐ржм":"ржмрж┐",
    "рж┐ржн":"ржнрж┐",
    "рж┐ржо":"ржорж┐",
    "рж┐ржп":"ржпрж┐",
    "рж┐рж░":"рж░рж┐",
    "рж┐рж▓":"рж▓рж┐",
    "рж┐рж╢":"рж╢рж┐",
    "рж┐рж╖":"рж╖рж┐",
    "рж┐рж╕":"рж╕рж┐",
    "рж┐рж╣":"рж╣рж┐",
    "рж┐рзЬ":"рзЬрж┐",
    "рж┐ржв":"рзЭрж┐",
    "рж┐рзЯ":"рзЯрж┐",
    
    "рзАржХ":"ржХрзА",
    "рзАржЦ":"ржЦрзА",
    "рзАржЧ":"ржЧрзА",
    "рзАржШ":"ржШрзА",
    "рзАржЩ":"ржЩрзА",
    "рзАржЪ":"ржЪрзА",
    "рзАржЫ":"ржЫрзА",
    "рзАржЬ":"ржЬрзА",
    "рзАржЭ":"ржЭрзА",
    "рзАржЮ":"ржЮрзА",
    "рзАржЯ":"ржЯрзА",
    "рзАржа":"ржарзА",
    "рзАржб":"ржбрзА",
    "рзАржв":"ржврзА",
    "рзАржг":"ржгрзА",
    "рзАржд":"рждрзА",
    "рзАрже":"ржерзА",
    "рзАржж":"ржжрзА",
    "рзАржз":"ржзрзА",
    "рзАржи":"ржирзА",
    "рзАржк":"ржкрзА",
    "рзАржл":"ржлрзА",
    "рзАржм":"ржмрзА",
    "рзАржн":"ржнрзА",
    "рзАржо":"ржорзА",
    "рзАржп":"ржпрзА",
    "рзАрж░":"рж░рзА",
    "рзАрж▓":"рж▓рзА",
    "рзАрж╢":"рж╢рзА",
    "рзАрж╖":"рж╖рзА",
    "рзАрж╕":"рж╕рзА",
    "рзАрж╣":"рж╣рзА",
    "рзАрзЬ":"рзЬрзА",
    "рзАрзЭ":"рзЭрзА",
    "рзАрзЯ":"рзЯрзА",
    
    "рзБржХ":"ржХрзБ",
    "рзБржЦ":"ржЦрзБ",
    "рзБржЧ":"ржЧрзБ",
    "рзБржШ":"ржШрзБ",
    "рзБржЩ":"ржЩрзБ",
    "рзБржЪ":"ржЪрзБ",
    "рзБржЫ":"ржЫрзБ",
    "рзБржЬ":"ржЬрзБ",
    "рзБржЭ":"ржЭрзБ",
    "рзБржЮ":"ржЮрзБ",
    "рзБржЯ":"ржЯрзБ",
    "рзБржа":"ржарзБ",
    "рзБржб":"ржбрзБ",
    "рзБржв":"ржврзБ",
    "рзБржг":"ржгрзБ",
    "рзБржд":"рждрзБ",
    "рзБрже":"ржерзБ",
    "рзБржж":"ржжрзБ",
    "рзБржз":"ржзрзБ",
    "рзБржи":"ржирзБ",
    "рзБржк":"ржкрзБ",
    "рзБржл":"ржлрзБ",
    "рзБржм":"ржмрзБ",
    "рзБржн":"ржнрзБ",
    "рзБржо":"ржорзБ",
    "рзБржп":"ржпрзБ",
    "рзБрж░":"рж░рзБ",
    "рзБрж▓":"рж▓рзБ",
    "рзБрж╢":"рж╢рзБ",
    "рзБрж╖":"рж╖рзБ",
    "рзБрж╕":"рж╕рзБ",
    "рзБрж╣":"рж╣рзБ",
    "рзБрзЬ":"рзЬрзБ",
    "рзБржв":"рзЭрзБ",
    "рзБрзЯ":"рзЯрзБ",
    
    "рзВржХ":"ржХрзВ",
    "рзВржЦ":"ржЦрзВ",
    "рзВржЧ":"ржЧрзВ",
    "рзВржШ":"ржШрзВ",
    "рзВржЩ":"ржЩрзВ",
    "рзВржЪ":"ржЪрзВ",
    "рзВржЫ":"ржЫрзВ",
    "рзВржЬ":"ржЬрзВ",
    "рзВржЭ":"ржЭрзВ",
    "рзВржЮ":"ржЮрзВ",
    "рзВржЯ":"ржЯрзВ",
    "рзВржа":"ржарзВ",
    "рзВржб":"ржбрзВ",
    "рзВржв":"ржврзВ",
    "рзВржг":"ржгрзВ",
    "рзВржд":"рждрзВ",
    "рзВрже":"ржерзВ",
    "рзВржж":"ржжрзВ",
    "рзВржз":"ржзрзВ",
    "рзВржи":"ржирзВ",
    "рзВржк":"ржкрзВ",
    "рзВржл":"ржлрзВ",
    "рзВржм":"ржмрзВ",
    "рзВржн":"ржнрзВ",
    "рзВржо":"ржорзВ",
    "рзВржп":"ржпрзВ",
    "рзВрж░":"рж░рзВ",
    "рзВрж▓":"рж▓рзВ",
    "рзВрж╢":"рж╢рзВ",
    "рзВрж╖":"рж╖рзВ",
    "рзВрж╕":"рж╕рзВ",
    "рзВрж╣":"рж╣рзВ",
    "рзВрзЬ":"рзЬрзВ",
    "рзВрзЭ":"рзЭрзВ",
    "рзВрзЯ":"рзЯрзВ",
    
    "рзЗржХ":"ржХрзЗ",
    "рзЗржЦ":"ржЦрзЗ",
    "рзЗржЧ":"ржЧрзЗ",
    "рзЗржШ":"ржШрзЗ",
    "рзЗржЩ":"ржЩрзЗ",
    "рзЗржЪ":"ржЪрзЗ",
    "рзЗржЫ":"ржЫрзЗ",
    "рзЗржЬ":"ржЬрзЗ",
    "рзЗржЭ":"ржЭрзЗ",
    "рзЗржЮ":"ржЮрзЗ",
    "рзЗржЯ":"ржЯрзЗ",
    "рзЗржа":"ржарзЗ",
    "рзЗржб":"ржбрзЗ",
    "рзЗржв":"ржврзЗ",
    "рзЗржг":"ржгрзЗ",
    "рзЗржд":"рждрзЗ",
    "рзЗрже":"ржерзЗ",
    "рзЗржж":"ржжрзЗ",
    "рзЗржз":"ржзрзЗ",
    "рзЗржи":"ржирзЗ",
    "рзЗржк":"ржкрзЗ",
    "рзЗржл":"ржлрзЗ",
    "рзЗржм":"ржмрзЗ",
    "рзЗржн":"ржнрзЗ",
    "рзЗржо":"ржорзЗ",
    "рзЗржп":"ржпрзЗ",
    "рзЗрж░":"рж░рзЗ",
    "рзЗрж▓":"рж▓рзЗ",
    "рзЗрж╢":"рж╢рзЗ",
    "рзЗрж╖":"рж╖рзЗ",
    "рзЗрж╕":"рж╕рзЗ",
    "рзЗрж╣":"рж╣рзЗ",
    "рзЗрзЬ":"рзЬрзЗ",
    "рзЗржв":"рзЭрзЗ",
    "рзЗрзЯ":"рзЯрзЗ",
    
    "рзИржХ":"ржХрзИ",
    "рзИржЦ":"ржЦрзИ",
    "рзИржЧ":"ржЧрзИ",
    "рзИржШ":"ржШрзИ",
    "рзИржЩ":"ржЩрзИ",
    "рзИржЪ":"ржЪрзИ",
    "рзИржЫ":"ржЫрзИ",
    "рзИржЬ":"ржЬрзИ",
    "рзИржЭ":"ржЭрзИ",
    "рзИржЮ":"ржЮрзИ",
    "рзИржЯ":"ржЯрзИ",
    "рзИржа":"ржарзИ",
    "рзИржб":"ржбрзИ",
    "рзИржв":"ржврзИ",
    "рзИржг":"ржгрзИ",
    "рзИржд":"рждрзИ",
    "рзИрже":"ржерзИ",
    "рзИржж":"ржжрзИ",
    "рзИржз":"ржзрзИ",
    "рзИржи":"ржирзИ",
    "рзИржк":"ржкрзИ",
    "рзИржл":"ржлрзИ",
    "рзИржм":"ржмрзИ",
    "рзИржн":"ржнрзИ",
    "рзИржо":"ржорзИ",
    "рзИржп":"ржпрзИ",
    "рзИрж░":"рж░рзИ",
    "рзИрж▓":"рж▓рзИ",
    "рзИрж╢":"рж╢рзИ",
    "рзИрж╖":"рж╖рзИ",
    "рзИрж╕":"рж╕рзИ",
    "рзИрж╣":"рж╣рзИ",
    "рзИрзЬ":"рзЬрзИ",
    "рзИрзЭ":"рзЭрзИ",
    "рзИрзЯ":"рзЯрзИ",
    
    "рзЛржХ":"ржХрзЛ",
    "рзЛржЦ":"ржЦрзЛ",
    "рзЛржЧ":"ржЧрзЛ",
    "рзЛржШ":"ржШрзЛ",
    "рзЛржЩ":"ржЩрзЛ",
    "рзЛржЪ":"ржЪрзЛ",
    "рзЛржЫ":"ржЫрзЛ",
    "рзЛржЬ":"ржЬрзЛ",
    "рзЛржЭ":"ржЭрзЛ",
    "рзЛржЮ":"ржЮрзЛ",
    "рзЛржЯ":"ржЯрзЛ",
    "рзЛржа":"ржарзЛ",
    "рзЛржб":"ржбрзЛ",
    "рзЛржв":"ржврзЛ",
    "рзЛржг":"ржгрзЛ",
    "рзЛржд":"рждрзЛ",
    "рзЛрже":"ржерзЛ",
    "рзЛржж":"ржжрзЛ",
    "рзЛржз":"ржзрзЛ",
    "рзЛржи":"ржирзЛ",
    "рзЛржк":"ржкрзЛ",
    "рзЛржл":"ржлрзЛ",
    "рзЛржм":"ржмрзЛ",
    "рзЛржн":"ржнрзЛ",
    "рзЛржо":"ржорзЛ",
    "рзЛржп":"ржпрзЛ",
    "рзЛрж░":"рж░рзЛ",
    "рзЛрж▓":"рж▓рзЛ",
    "рзЛрж╢":"рж╢рзЛ",
    "рзЛрж╖":"рж╖рзЛ",
    "рзЛрж╕":"рж╕рзЛ",
    "рзЛрж╣":"рж╣рзЛ",
    "рзЛрзЬ":"рзЬрзЛ",
    "рзЛрзЭ":"рзЭрзЛ",
    "рзЛрзЯ":"рзЯрзЛ",
    
    "рзМржХ":"ржХрзМ",
    "рзМржЦ":"ржЦрзМ",
    "рзМржЧ":"ржЧрзМ",
    "рзМржШ":"ржШрзМ",
    "рзМржЩ":"ржЩрзМ",
    "рзМржЪ":"ржЪрзМ",
    "рзМржЫ":"ржЫрзМ",
    "рзМржЬ":"ржЬрзМ",
    "рзМржЭ":"ржЭрзМ",
    "рзМржЮ":"ржЮрзМ",
    "рзМржЯ":"ржЯрзМ",
    "рзМржа":"ржарзМ",
    "рзМржб":"ржбрзМ",
    "рзМржв":"ржврзМ",
    "рзМржг":"ржгрзМ",
    "рзМржд":"рждрзМ",
    "рзМрже":"ржерзМ",
    "рзМржж":"ржжрзМ",
    "рзМржз":"ржзрзМ",
    "рзМржи":"ржирзМ",
    "рзМржк":"ржкрзМ",
    "рзМржл":"ржлрзМ",
    "рзМржм":"ржмрзМ",
    "рзМржн":"ржнрзМ",
    "рзМржо":"ржорзМ",
    "рзМржп":"ржпрзМ",
    "рзМрж░":"рж░рзМ",
    "рзМрж▓":"рж▓рзМ",
    "рзМрж╢":"рж╢рзМ",
    "рзМрж╖":"рж╖рзМ",
    "рзМрж╕":"рж╕рзМ",
    "рзМрж╣":"рж╣рзМ",
    "рзМрзЬ":"рзЬрзМ",
    "рзМрзЭ":"рзЭрзМ",
    "рзМрзЯ":"рзЯрзМ"

};

function autoFixBangla(text) {
    for (const bad in fixMap) {
        text = text.replaceAll(bad, fixMap[bad]);
    }

    return text
        .replace(/\s{2,}/g, " ")
        .replace(/ ,/g, ",")
        .replace(/ \./g, ".")
        .trim();
}

/* ===== LOAD PDF ===== */
async function initScanner() {
    const status = document.getElementById("status");

    try {
        const pdf = await pdfjsLib.getDocument("pdfs/dhaka_male.pdf").promise;

        for (let i = 1; i <= pdf.numPages; i++) {
            const page = await pdf.getPage(i);
            const content = await page.getTextContent();
            fullPdfText += content.items.map(i => i.str).join(" ") + " ";
            status.innerText = `Scanning ${Math.round((i/pdf.numPages)*100)}%`;
        }

        status.innerText = "DATABASE ONLINE | READY";

    } catch (e) {
        status.innerText = "ERROR: PDF NOT FOUND";
        console.error(e);
    }
}

/* ===== SEARCH LOGIC ===== */
function handleSearch() {
    const query = document.getElementById("searchInput").value.trim();
    const results = document.getElementById("results");
    results.innerHTML = "";

    if (query.length < 2 || !fullPdfText) return;

    let pos = 0;
    let found = false;

    while ((pos = fullPdfText.indexOf(query, pos)) !== -1) {
        found = true;

        let start = fullPdfText.lastIndexOf(" ├Пржнрж╛рж▓рж╛", pos);
        start = start === -1 ? 0 : start + 1;

        let end = fullPdfText.indexOf(" ├Пржнрж╛рж▓рж╛", pos + query.length);
        if (end === -1) end = pos + 300;

        let record = fullPdfText.substring(start, end).trim();

        /* ЁЯФе AUTO FIX APPLIED HERE */
        record = autoFixBangla(record);

        let voterMatch = record.match(/(\d{4})\s*\./);
        let voterNo = voterMatch ? voterMatch[1] : "N/A";

        const safe = query.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
        record = record.replace(
            new RegExp(safe, "g"),
            `<span class="highlight">${query}</span>`
        );

        const card = document.createElement("div");
        card.className = "result-card";
        card.innerHTML = `
            <span class="voter">ржнрзЛржЯрж╛рж░ ржиржВ: ${voterNo}</span>
            <div class="data-content">${record}</div>
        `;

        results.appendChild(card);
        pos += query.length;
    }

    if (!found) {
        results.innerHTML =
            "<p style='text-align:center;color:gray;'>ржХрзЛржирзЛ рждржерзНржп ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯржирж┐</p>";
    }
}

/* ===== INPUT LISTENER ===== */
const input = document.getElementById("searchInput");

input.addEventListener("input", () => {
    const cursor = input.selectionStart;
    input.value = convertToBanglaDigits(input.value);
    input.setSelectionRange(cursor, cursor);
    handleSearch();
});

initScanner();
</script>

</body>
</html>











